
{$DOMAIN_NAME:localhost} {
    # Serve static files from /srv
    root * /srv
    encode gzip
    file_server

    # Reverse proxy API requests to PocketBase container
    handle /api/* {
        reverse_proxy pocketbase:8090
    }

    # Reverse proxy Admin UI requests to PocketBase container
    handle /_* {
        reverse_proxy pocketbase:8090
    }

    # Fallback to index.html for SPA-like routing (if strictly needed, though Astro static usually maps fine)
    try_files {path} {path}/index.html {path}.html =404
}
