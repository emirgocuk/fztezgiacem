import{p as c}from"./pocketbase.DxbRfAQo.js";import{u as y}from"./imgbb.Dz0VKEpx.js";import"./pocketbase.es.B4ZgO_7c.js";const g=new URLSearchParams(window.location.search),i=g.get("id"),l=document.getElementById("editForm"),f=document.getElementById("loadingState"),r=document.getElementById("fileInput"),s=document.getElementById("imageUrl"),o=document.getElementById("previewImage"),m=document.getElementById("fileName"),a=document.getElementById("uploadStatus");i||(alert("ID bulunamadı!"),window.location.href="/admin/specializations");async function p(){try{if(!i)return;const e=await c.collection("specializations").getOne(i);document.getElementById("recordId").value=e.id,document.querySelector('input[name="title"]').value=e.title,document.querySelector('input[name="slug"]').value=e.slug,document.querySelector('input[name="icon"]').value=e.icon||"",document.querySelector('select[name="color"]').value=e.color||"orange",document.querySelector('textarea[name="summary"]').value=e.summary||"",document.querySelector('textarea[name="details"]').value=e.details||"",e.image&&(s.value=e.image,o.src=e.image,o.classList.remove("hidden")),f?.classList.add("hidden"),l?.classList.remove("hidden")}catch(e){alert("Veri yüklenemedi: "+e.message),window.location.href="/admin/specializations"}}p();r?.addEventListener("change",async()=>{const e=r.files?.[0];if(e){m&&(m.textContent=e.name),a&&(a.textContent="Yükleniyor...",a.className="text-xs text-blue-500 mt-1 font-medium");try{const t=await y(e);s.value=t,o.src=t,o.classList.remove("hidden"),a&&(a.textContent="Resim başarıyla yüklendi.",a.className="text-xs text-green-600 mt-1 font-medium")}catch(t){console.error(t),a&&(a.textContent="Hata: "+t.message,a.className="text-xs text-red-500 mt-1 font-medium")}}});l?.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("submitBtn"),d=t.innerText;try{t.disabled=!0,t.innerText="Kaydediliyor...";const n=new FormData(l),u=Object.fromEntries(n);await c.collection("specializations").update(i,u),alert("Güncelleme başarılı!"),window.location.href="/admin/specializations"}catch(n){console.error(n),alert("Hata oluştu: "+(n.message||"Bilinmeyen hata"))}finally{t.disabled=!1,t.innerText=d}});
